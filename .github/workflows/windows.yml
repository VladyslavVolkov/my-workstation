name: Windows
on:
  push:
    paths:
      - 'windows/wsl/**'
jobs:
  wsl:
    name: Enable WSL
    runs-on: windows-latest
    steps:
      - name: Enable WSL
        run: Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux
        shell: powershell
      - name: Download Alpine rootfs
        working-directory: windows\wsl
        run: .\Install.ps1 alpine
        shell: powershell
      - name: Install Alpine
        working-directory: windows\wsl\alpine
        shell: powershell
        run: .\alpine.exe
      - name: Check Alpine version
        working-directory: windows\wsl\alpine
        shell: powershell
        run: .\alpine.exe run -- cat /etc/os-release
